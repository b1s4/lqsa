<!DOCTYPE html>
<html>
<head>
    <title>Lqsa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden; /* Para evitar el desbordamiento de la cuadrícula */
        }
        .timer-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .timer {
            font-size: 36px;
            font-weight: bold;
            color: #ffffff;
            background-color: #007bff;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            width: 150px;
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Ajusta el tamaño mínimo de las columnas */
            gap: 10px;
            width: 100%;
            max-width: 1200px; /* Puedes ajustar este valor según el diseño deseado */
            padding: 10px;
            box-sizing: border-box;
            overflow: auto; /* Permite el desplazamiento si hay demasiados videos */
        }
        video {
            width: 100%;
            height: auto; /* Mantiene la proporción del video */
            border: 2px solid #007bff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="timer-container">
        <div id="timer" class="timer">10s</div>
        <div id="chrono" class="timer">00:00:00</div>
    </div>
    <div class="video-grid">
        <video src="1x01.mp4" controls autoplay muted loop></video>
        <video src="1x02.mp4" controls autoplay muted loop></video>
        <video src="1x03.mp4" controls autoplay muted loop></video>
        <video src="1x04.mp4" controls autoplay muted loop></video>
        <video src="1x05.mp4" controls autoplay muted loop></video>
        <video src="1x06.mp4" controls autoplay muted loop></video>
        <video src="1x07.mp4" controls autoplay muted loop></video>
        <video src="1x08.mp4" controls autoplay muted loop></video>
        <video src="1x09.mp4" controls autoplay muted loop></video>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videos = document.querySelectorAll('video');
            const switchInterval = 10000; // 10 segundos en milisegundos
            let currentVideoIndex = -1; // Inicializar con un valor que no sea válido
            let remainingTime = switchInterval / 1000; // Tiempo restante en segundos

            // Inicializar todos los videos con un tiempo aleatorio
            videos.forEach(video => {
                video.addEventListener('loadedmetadata', function() {
                    const randomTime = Math.random() * video.duration;
                    video.currentTime = randomTime;
                    video.play(); // Asegúrate de que todos los videos comiencen a reproducirse
                });
            });

            function getRandomIndex(excludeIndex) {
                let index;
                do {
                    index = Math.floor(Math.random() * videos.length);
                } while (index === excludeIndex);
                return index;
            }

            function updateTimerDisplay() {
                const timer = document.getElementById('timer');
                timer.textContent = `${remainingTime.toFixed(0)}s`;
            }

            function formatTime(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const secs = Math.floor(seconds % 60);
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            let timeElapsed = 0; // Tiempo transcurrido en segundos

            // Cambiar el estado de silencio entre los videos cada 10 segundos
            setInterval(function() {
                // Silenciar el video actual si hay uno
                if (currentVideoIndex !== -1) {
                    videos[currentVideoIndex].muted = true;
                }

                // Elegir un nuevo video aleatorio para desilenciar
                currentVideoIndex = getRandomIndex(currentVideoIndex);

                // Desilenciar el nuevo video
                videos[currentVideoIndex].muted = false;

                // Asegúrate de que el video desilenciado se reproduzca
                videos[currentVideoIndex].play();

                // Resetear el temporizador
                remainingTime = switchInterval / 1000;
                updateTimerDisplay();
            }, switchInterval);

            // Actualizar el temporizador cada segundo
            setInterval(function() {
                if (remainingTime > 0) {
                    remainingTime -= 1;
                    updateTimerDisplay();
                }
            }, 1000);

            // Cronómetro de tiempo en la página
            setInterval(function() {
                timeElapsed += 1;
                const chrono = document.getElementById('chrono');
                chrono.textContent = formatTime(timeElapsed);
            }, 1000);
        });
    </script>
</body>
</html>
